
export const emotionsData = {
  positive: [
    { name: '—Ä–∞–¥–æ—Å—Ç—å', emoji: 'üòä' },
    { name: '–∏–Ω—Ç–µ—Ä–µ—Å', emoji: 'ü§î' },
    { name: '–≤–¥–æ—Ö–Ω–æ–≤–µ–Ω–∏–µ', emoji: '‚ú®' },
    { name: '—É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å', emoji: 'üí™' },
    { name: '—Å–ø–æ–∫–æ–π—Å—Ç–≤–∏–µ', emoji: 'üòå' },
    { name: '–±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç—å', emoji: 'üôè' },
    { name: '–≥–æ—Ä–¥–æ—Å—Ç—å', emoji: 'üéâ' },
    { name: '–≤–æ–æ–¥—É—à–µ–≤–ª–µ–Ω–∏–µ', emoji: 'üöÄ' },
    { name: '—É–º–∏—Ä–æ—Ç–≤–æ—Ä–µ–Ω–∏–µ', emoji: 'üïäÔ∏è' },
    { name: '–ª—é–±–æ–≤—å', emoji: '‚ù§Ô∏è' },
    { name: '–Ω–µ–∂–Ω–æ—Å—Ç—å', emoji: 'ü§ó' },
  ],
  neutral: [
    { name: '—É–¥–∏–≤–ª–µ–Ω–∏–µ', emoji: 'üò≤' },
    { name: '—Å–∫—É–∫–∞', emoji: 'üòê' },
    { name: '–æ–∂–∏–¥–∞–Ω–∏–µ', emoji: '‚è≥' },
    { name: '—Ä–∞—Å—Ç–µ—Ä—è–Ω–Ω–æ—Å—Ç—å', emoji: 'ü§∑' },
    { name: '—Å–ø–æ–∫–æ–π–Ω–æ–µ –ø—Ä–∏–Ω—è—Ç–∏–µ', emoji: 'üôÇ' },
    { name: '–Ω–æ—Å—Ç–∞–ª—å–≥–∏—è', emoji: 'üí≠' },
  ],
  negative: [
    { name: '–≥—Ä—É—Å—Ç—å', emoji: 'üò¢' },
    { name: '—Ç—Ä–µ–≤–æ–≥–∞', emoji: 'üò∞' },
    { name: '–æ–±–∏–¥–∞', emoji: 'üòî' },
    { name: '—Ä–∞–∑–¥—Ä–∞–∂–µ–Ω–∏–µ', emoji: 'üò§' },
    { name: '–∑–ª–æ—Å—Ç—å', emoji: 'üò†' },
    { name: '–∞–ø–∞—Ç–∏—è', emoji: 'üòë' },
    { name: '–±–µ—Å–ø–æ–∫–æ–π—Å—Ç–≤–æ', emoji: 'üòü' },
    { name: '—Ñ—Ä—É—Å—Ç—Ä–∞—Ü–∏—è', emoji: 'üò£' },
    { name: '—Ä–∞–∑–æ—á–∞—Ä–æ–≤–∞–Ω–∏–µ', emoji: 'üòû' },
    { name: '—É—Å—Ç–∞–ª–æ—Å—Ç—å', emoji: 'üò¥' },
    { name: '–≤–∏–Ω–∞', emoji: 'üò≥' },
    { name: '—Å—Ç—ã–¥', emoji: 'üòì' },
    { name: '—Å—Ç—Ä–∞—Ö', emoji: 'üò®' },
    { name: '–æ–¥–∏–Ω–æ—á–µ—Å—Ç–≤–æ', emoji: 'üò∂' },
    { name: '–±–µ—Å–ø–æ–º–æ—â–Ω–æ—Å—Ç—å', emoji: 'üòµ' },
  ],
};

export const getMoodEmoji = (mood: number): string => {
  if (mood <= -4) return 'üòû';
  if (mood === -3) return 'üòî';
  if (mood === -2) return 'üòï';
  if (mood === -1) return 'üòê';
  if (mood === 0) return 'üôÇ';
  if (mood === 1) return 'üòä';
  if (mood === 2) return 'üòÉ';
  if (mood === 3) return 'üòÑ';
  if (mood === 4) return 'üòÅ';
  if (mood >= 5) return 'ü§©';
  return 'üôÇ';
};

export const getMoodZone = (mood: number) => {
  if (mood <= -2) {
    return {
      description: '–ù–µ–≥–∞—Ç–∏–≤–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ',
      color: 'bg-blue-100 border border-blue-300',
      zone: 'negative'
    };
  }
  if (mood >= 2) {
    return {
      description: '–ü–æ–∑–∏—Ç–∏–≤–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ',
      color: 'bg-yellow-100 border border-yellow-300',
      zone: 'positive'
    };
  }
  return {
    description: '–ù–µ–π—Ç—Ä–∞–ª—å–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ',
    color: 'bg-gray-100 border border-gray-300',
    zone: 'neutral'
  };
};

export const getRecommendations = (data: any): string[] => {
  const recommendations: string[] = [];
  
  // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
  if (data.mood <= -3) {
    recommendations.push('ü´Å –ü–æ–ø—Ä–æ–±—É–π –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—É—é –ø–∞—É–∑—É - 4 –≤–¥–æ—Ö–∞ –Ω–∞ 4 —Å—á–µ—Ç–∞, –∑–∞–¥–µ—Ä–∂–∫–∞ –Ω–∞ 4, –≤—ã–¥–æ—Ö –Ω–∞ 6.');
    recommendations.push('üå± –ü—Ä–∞–∫—Ç–∏–∫–∞ —Å–∞–º–æ—Å–æ—Å—Ç—Ä–∞–¥–∞–Ω–∏—è: –æ–±—Ä–∞—Ç–∏—Å—å –∫ —Å–µ–±–µ —Ç–∞–∫ –∂–µ –ª–∞—Å–∫–æ–≤–æ, –∫–∞–∫ –∫ –ª—É—á—à–µ–º—É –¥—Ä—É–≥—É.');
  }
  
  if (data.mood >= 4) {
    recommendations.push('‚ú® –û—Ç–ª–∏—á–Ω–æ–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ! –ó–∞—Ñ–∏–∫—Å–∏—Ä—É–π —ç—Ç–æ—Ç –º–æ–º–µ–Ω—Ç - –∑–∞–ø–∏—à–∏, —á—Ç–æ —Ç–µ–±—è —Ä–∞–¥—É–µ—Ç.');
    recommendations.push('üôè –ü—Ä–∞–∫—Ç–∏–∫–∞ –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏: –Ω–∞–∑–æ–≤–∏ 3 –≤–µ—â–∏, –∑–∞ –∫–æ—Ç–æ—Ä—ã–µ —Ç—ã –±–ª–∞–≥–æ–¥–∞—Ä–µ–Ω —Å–µ–≥–æ–¥–Ω—è.');
  }

  // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏–Ω—Ç–µ–Ω—Å–∏–≤–Ω—ã—Ö –Ω–µ–≥–∞—Ç–∏–≤–Ω—ã—Ö —ç–º–æ—Ü–∏–π
  const hasHighNegativeEmotions = data.selectedEmotions?.some((emotion: any) => {
    const emotionData = emotionsData.negative.find(e => e.name === emotion.name);
    return emotionData && emotion.intensity >= 7;
  });

  if (hasHighNegativeEmotions) {
    recommendations.push('üß† –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ "5-4-3-2-1": –Ω–∞–π–¥–∏ 5 –≤–µ—â–µ–π, –∫–æ—Ç–æ—Ä—ã–µ –≤–∏–¥–∏—à—å, 4 - –∫–æ—Ç–æ—Ä—ã–µ —Å–ª—ã—à–∏—à—å, 3 - –∫–æ—Ç–æ—Ä—ã–µ —á—É–≤—Å—Ç–≤—É–µ—à—å.');
    recommendations.push('üìù –ü–æ–ø—Ä–æ–±—É–π –∑–∞–ø–∏—Å–∞—Ç—å —Å–≤–æ–∏ –º—ã—Å–ª–∏ –Ω–∞ –±—É–º–∞–≥–µ - —ç—Ç–æ –ø–æ–º–æ–∂–µ—Ç –∏—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞—Ç—å.');
  }

  // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã—Ö –∏—Å–∫–∞–∂–µ–Ω–∏–π
  if (data.hasCognitiveBias) {
    recommendations.push('üí≠ –û—Ç–ª–∏—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –ø–µ—Ä–µ—Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –º—ã—Å–ª–µ–π! –ü—Ä–æ–¥–æ–ª–∂–∞–π –ø—Ä–∞–∫—Ç–∏–∫–æ–≤–∞—Ç—å –≥–∏–±–∫–æ–µ –º—ã—à–ª–µ–Ω–∏–µ.');
    recommendations.push('üîç –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ "–î–µ—Ç–µ–∫—Ç–∏–≤": –Ω–∞–π–¥–∏ –¥–æ–∫–∞–∑–∞—Ç–µ–ª—å—Å—Ç–≤–∞ "–∑–∞" –∏ "–ø—Ä–æ—Ç–∏–≤" —Å–≤–æ–µ–π –Ω–µ–≥–∞—Ç–∏–≤–Ω–æ–π –º—ã—Å–ª–∏.');
  }

  // –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏
  if (data.selfEvaluation <= -1) {
    recommendations.push('ü§ó –ë—É–¥—å –¥–æ–±—Ä–µ–µ –∫ —Å–µ–±–µ. –¢—ã –¥–µ–ª–∞–µ—à—å –≤—Å–µ, —á—Ç–æ –º–æ–∂–µ—à—å –≤ —Ç–µ–∫—É—â–∏—Ö –æ–±—Å—Ç–æ—è—Ç–µ–ª—å—Å—Ç–≤–∞—Ö.');
    recommendations.push('üåü –í—Å–ø–æ–º–Ω–∏ –æ–¥–Ω—É –º–∞–ª–µ–Ω—å–∫—É—é –≤–µ—â—å, –∫–æ—Ç–æ—Ä—É—é —Ç—ã —Å–µ–≥–æ–¥–Ω—è —Å–¥–µ–ª–∞–ª —Ö–æ—Ä–æ—à–æ.');
  }

  // –ë–∞–∑–æ–≤—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –∑–∞–±–æ—Ç—ã –æ —Å–µ–±–µ
  if (recommendations.length === 0) {
    recommendations.push('üíö –°–µ–≥–æ–¥–Ω—è —Ç—ã –±—ã–ª —á–µ—Å—Ç–µ–Ω —Å —Å–æ–±–æ–π, –∑–∞–ø–æ–ª–Ω–∏–≤ –¥–Ω–µ–≤–Ω–∏–∫. –≠—Ç–æ —É–∂–µ –±–æ–ª—å—à–æ–π —à–∞–≥!');
    recommendations.push('üå∏ –°–¥–µ–ª–∞–π —á—Ç–æ-—Ç–æ –ø—Ä–∏—è—Ç–Ω–æ–µ –¥–ª—è —Å–µ–±—è: –≤—ã–ø–µ–π –ª—é–±–∏–º—ã–π —á–∞–π –∏–ª–∏ –ø–æ—Å–ª—É—à–∞–π –º—É–∑—ã–∫—É.');
  }

  return recommendations;
};

export const analyzeMoodTrend = (entries: any[]) => {
  // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç—Ä–µ–Ω–¥–æ–≤ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
  if (entries.length === 0) return null;
  
  const recent = entries.slice(-7); // –ü–æ—Å–ª–µ–¥–Ω–∏–µ 7 –∑–∞–ø–∏—Å–µ–π
  const avgMood = recent.reduce((sum, entry) => sum + entry.mood, 0) / recent.length;
  
  return {
    averageMood: avgMood,
    trend: avgMood > 0 ? 'positive' : avgMood < 0 ? 'negative' : 'neutral',
    recommendation: avgMood < -2 ? '–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º –æ–±—Ä–∞—Ç–∏—Ç—å—Å—è –∫ —Å–ø–µ—Ü–∏–∞–ª–∏—Å—Ç—É' : '–ü—Ä–æ–¥–æ–ª–∂–∞–π –∑–∞–±–æ—Ç–∏—Ç—å—Å—è –æ —Å–µ–±–µ'
  };
};
