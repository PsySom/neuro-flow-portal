# Mental Balance - –ü–ª–∞—Ç—Ñ–æ—Ä–º–∞ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏

## üìã –û–±—â–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ù–∞–∑–≤–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞**: Mental Balance  
**–¢–∏–ø**: Fullstack –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –ø–æ–¥–¥–µ—Ä–∂–∫–∏  
**–¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏**: React 18, TypeScript, Vite, Tailwind CSS, Supabase  
**–°—Ç–∞—Ç—É—Å**: Alpha (–∞–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞)  
**Supabase Project**: `szvousyzsqdpubgfycdy`

### –û–ø–∏—Å–∞–Ω–∏–µ
Mental Balance - —ç—Ç–æ –∫–æ–º–ø–ª–µ–∫—Å–Ω–∞—è –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è —Å–∞–º–æ–ø–æ–º–æ—â–∏ –≤ –æ–±–ª–∞—Å—Ç–∏ –º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –∑–¥–æ—Ä–æ–≤—å—è, –≤–∫–ª—é—á–∞—é—â–∞—è AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–∞, –¥–Ω–µ–≤–Ω–∏–∫–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è –∏ —Å–Ω–∞, –∫–∞–ª–µ–Ω–¥–∞—Ä—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π, –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫—É –ø—Ä–æ–≥—Ä–µ—Å—Å–∞.

---

## üéØ –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

#### ü§ñ AI –î–Ω–µ–≤–Ω–∏–∫ (FreeChat)
- **Realtime —á–∞—Ç** —Å AI-–∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º –¥–ª—è —Ä–µ—Ñ–ª–µ–∫—Å–∏–∏ –∏ —Å–∞–º–æ–∞–Ω–∞–ª–∏–∑–∞
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏—è–º–∏**: —Å–æ–∑–¥–∞–Ω–∏–µ, –ø—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ, –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ
- **–ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞
- **–ê–Ω–∞–ª–∏—Ç–∏–∫–∞**: –≥–ª–æ–±–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, —Ç–æ–ø-—Ç–µ–º—ã, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å —Å–µ—Å—Å–∏–π
- **Quick Suggestions**: –±—ã—Å—Ç—Ä—ã–µ –æ—Ç–≤–µ—Ç—ã –æ—Ç AI —Å –∞–≤—Ç–æ–æ—Ç–ø—Ä–∞–≤–∫–æ–π
- **Typing —ç—Ñ—Ñ–µ–∫—Ç**: –ø–ª–∞–≤–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ AI –æ—Ç–≤–µ—Ç–æ–≤ character-by-character
- **–ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏–π**: –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- **–ê–≤—Ç–æ—Å–∫—Ä–æ–ª–ª**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–∫—Ä—É—Ç–∫–∞ –∫ –Ω–æ–≤—ã–º —Å–æ–æ–±—â–µ–Ω–∏—è–º

#### üìù –î–Ω–µ–≤–Ω–∏–∫–∏
- **–î–Ω–µ–≤–Ω–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è**: 5-—ç—Ç–∞–ø–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å —ç–º–æ—Ü–∏—è–º–∏, —Ç—Ä–∏–≥–≥–µ—Ä–∞–º–∏, –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º
- **–î–Ω–µ–≤–Ω–∏–∫ —Å–Ω–∞**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–∞ —Å–Ω–∞, –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏–π, –¥–Ω–µ–≤–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞
- **–î–Ω–µ–≤–Ω–∏–∫ –º—ã—Å–ª–µ–π**: —Ä–∞–±–æ—Ç–∞ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º–∏ –º—ã—Å–ª—è–º–∏ –∏ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–º–∏ –∏—Å–∫–∞–∂–µ–Ω–∏—è–º–∏
- **OCD –¥–Ω–µ–≤–Ω–∏–∫**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –Ω–∞–≤—è–∑—á–∏–≤—ã—Ö –º—ã—Å–ª–µ–π –∏ –∫–æ–º–ø—É–ª—å—Å–∏–π
- **–î–Ω–µ–≤–Ω–∏–∫ –ø—Ä–æ–∫—Ä–∞—Å—Ç–∏–Ω–∞—Ü–∏–∏**: –∞–Ω–∞–ª–∏–∑ –æ—Ç–∫–ª–∞–¥—ã–≤–∞–Ω–∏—è –∑–∞–¥–∞—á
- **–î–Ω–µ–≤–Ω–∏–∫ —Å–∞–º–æ–æ—Ü–µ–Ω–∫–∏**: —Ä–∞–±–æ—Ç–∞ —Å —Å–∞–º–æ–∫—Ä–∏—Ç–∏–∫–æ–π –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π
- **–î–Ω–µ–≤–Ω–∏–∫ –¥–µ–ø—Ä–µ—Å—Å–∏–∏**: –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è

#### üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–Ω–µ–≤–Ω–∏–∫–∏ (–Ω–æ–≤–æ–µ)
- **–î–≤–∏–∂–æ–∫ —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤**: –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- **–¢–∏–ø—ã –≤–æ–ø—Ä–æ—Å–æ–≤**: scale (—à–∫–∞–ª–∞), chips (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä), time, number, text
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö**: –º–µ—Ç—Ä–∏–∫–∏, —ç–º–æ—Ü–∏–∏, –∫–æ–Ω—Ç–µ–∫—Å—Ç –≤ –ë–î
- **–ù–æ—Ä–º—ã –∏ –∞–ª–µ—Ä—Ç—ã**: –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π –æ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π
- **–ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø–∏—Å–µ–π**: –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π —Å –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π –∞–Ω–æ–º–∞–ª–∏–π
- **–î–Ω–µ–≤–Ω–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è (—Å—Ü–µ–Ω–∞—Ä–∏–π)**: –ø–µ—Ä–≤—ã–π —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫

#### üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
- **–¢—Ä–∏ —Ä–µ–∂–∏–º–∞ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞**: –î–µ–Ω—å, –ù–µ–¥–µ–ª—è, –ú–µ—Å—è—Ü
- **CRUD –æ–ø–µ—Ä–∞—Ü–∏–∏**: —Å–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
- **–¢–∏–ø—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π**: —Ä–∞–±–æ—Ç–∞, –æ—Ç–¥—ã—Ö, —Å–ø–æ—Ä—Ç, –æ–±—â–µ–Ω–∏–µ, —Ö–æ–±–±–∏, —Ç–µ—Ä–∞–ø–∏—è –∏ –¥—Ä.
- **–ü–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Å–æ–±—ã—Ç–∏—è**: –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–µ–∫—É—Ä—Ä–µ–Ω—Ç–Ω—ã—Ö –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
- **–°—Ç–∞—Ç—É—Å—ã**: planned, in_progress, completed, cancelled
- **–û—Ü–µ–Ω–∫–∞ –≤–ª–∏—è–Ω–∏—è**: –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏ —ç–Ω–µ—Ä–≥–∏—è –¥–æ/–ø–æ—Å–ª–µ
- **Realtime —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è**: –º–≥–Ω–æ–≤–µ–Ω–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

#### üìä –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ –∏ –≥—Ä–∞—Ñ–∏–∫–∏
- **–ì—Ä–∞—Ñ–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è**: –¥–µ–Ω—å/–Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü —Å –¥–µ—Ç–∞–ª–∏–∑–∞—Ü–∏–µ–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏
- **–ì—Ä–∞—Ñ–∏–∫ —Å–Ω–∞**: –∫–∞—á–µ—Å—Ç–≤–æ —Å–Ω–∞, –ø—Ä–æ–¥–æ–ª–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å, –ø—Ä–æ–±—É–∂–¥–µ–Ω–∏—è
- **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –∫–ª–∏–∫ –ø–æ —Ç–æ—á–∫–∞–º –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–µ—Ç–∞–ª–µ–π
- **–î–µ–º–æ-—Ä–µ–∂–∏–º**: –¥–ª—è –Ω–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

#### üéì –ü—Ä–∞–∫—Ç–∏–∫–∏ –∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
- **–ö–∞—Ç–∞–ª–æ–≥ –ø—Ä–∞–∫—Ç–∏–∫**: –¥—ã—Ö–∞—Ç–µ–ª—å–Ω—ã–µ —Ç–µ—Ö–Ω–∏–∫–∏, –º–µ–¥–∏—Ç–∞—Ü–∏–∏, CBT —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
- **–§–∏–ª—å—Ç—Ä—ã**: –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º, —Å–ª–æ–∂–Ω–æ—Å—Ç–∏, –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- **–°–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏**: –ø—Ä—è–º–æ –∏–∑ –ø—Ä–∞–∫—Ç–∏–∫–∏ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—å
- **–¢–µ—Å—Ç—ã**: –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
- **–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏**: –ø–æ—à–∞–≥–æ–≤—ã–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞

#### üë§ –ü—Ä–æ—Ñ–∏–ª—å –∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è
- **–û–Ω–±–æ—Ä–¥–∏–Ω–≥**: –º–Ω–æ–≥–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å –∑–Ω–∞–∫–æ–º—Å—Ç–≤–∞ (12+ —ç–∫—Ä–∞–Ω–æ–≤)
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: —Ü–µ–ª–∏, –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è, —Ä–∏—Ç–º—ã, —Ö—Ä–æ–Ω–æ—Ç–∏–ø
- **–ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**: –±–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è, –∫–æ–Ω—Ç–∞–∫—Ç—ã, –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å**: —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (–¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤)

#### üîê –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **Email + Password**: —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –≤—Ö–æ–¥
- **Magic Link** (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ): –≤—Ö–æ–¥ –ø–æ —Å—Å—ã–ª–∫–µ –∏–∑ email
- **Email –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è**: –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –ø–æ—á—Ç—ã (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)
- **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Å—Å–∏–µ–π**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ

### üöß –í —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ

#### AI –î–Ω–µ–≤–Ω–∏–∫ - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- **–£—Ç—Ä–µ–Ω–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π**: –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–Ω—è, –æ—Ü–µ–Ω–∫–∞ —Å–Ω–∞, –Ω–∞–º–µ—Ä–µ–Ω–∏—è
- **–î–Ω–µ–≤–Ω–æ–π —Å—Ü–µ–Ω–∞—Ä–∏–π**: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è, –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–ª–∞–Ω–æ–≤
- **–í–µ—á–µ—Ä–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–π**: —Ä–µ—Ñ–ª–µ–∫—Å–∏—è –¥–Ω—è, –±–ª–∞–≥–æ–¥–∞—Ä–Ω–æ—Å—Ç–∏, –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫–æ —Å–Ω—É
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ—Ä–º—ã**: –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è –æ—Ç –±–∞–∑–æ–≤—ã—Ö –ø–æ–∫–∞–∑–∞—Ç–µ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏**: –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–≤–µ—Ç–æ–≤ –∏ –∏—Å—Ç–æ—Ä–∏–∏

#### –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞
- **Balance Wheel**: –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –∂–∏–∑–Ω–µ–Ω–Ω—ã—Ö –æ–±–ª–∞—Å—Ç–µ–π
- **Insights**: AI-–≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º—ã–µ –∏–Ω—Å–∞–π—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö
- **–ü–∞—Ç—Ç–µ—Ä–Ω—ã**: –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∑–∞–∫–æ–Ω–æ–º–µ—Ä–Ω–æ—Å—Ç–µ–π

#### –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏
- **Calendar Sync**: —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å Google Calendar, Apple Calendar
- **Export/Import**: —ç–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### Frontend

```
React 18 (TypeScript)
‚îú‚îÄ‚îÄ Vite (dev server & build)
‚îú‚îÄ‚îÄ Tailwind CSS + shadcn/ui (—Å—Ç–∏–ª–∏–∑–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ React Router (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è)
‚îú‚îÄ‚îÄ React Query (–∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ API)
‚îú‚îÄ‚îÄ Supabase Client (–ë–î, Auth, Realtime)
‚îî‚îÄ‚îÄ Context API (–≥–ª–æ–±–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ)
```

**–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã:**
- `SupabaseAuthContext` - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–µ–π
- `PersonalizationContext` - –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `ActivitiesContext` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
- `DiaryStatusContext` - —Å–æ—Å—Ç–æ—è–Ω–∏–µ –¥–Ω–µ–≤–Ω–∏–∫–æ–≤

### Backend (Supabase)

```
Supabase Backend
‚îú‚îÄ‚îÄ PostgreSQL Database
‚îÇ   ‚îú‚îÄ‚îÄ 14 –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∞–±–ª–∏—Ü
‚îÇ   ‚îú‚îÄ‚îÄ RLS policies (–∑–∞—â–∏—Ç–∞ –¥–∞–Ω–Ω—ã—Ö)
‚îÇ   ‚îú‚îÄ‚îÄ 10+ DB functions
‚îÇ   ‚îî‚îÄ‚îÄ Triggers (auto-actions)
‚îú‚îÄ‚îÄ Auth (email/password, magic link)
‚îú‚îÄ‚îÄ Realtime (WebSocket subscriptions)
‚îî‚îÄ‚îÄ Webhooks (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å n8n)
```

### –í–Ω–µ—à–Ω–∏–µ —Å–µ—Ä–≤–∏—Å—ã

- **n8n** (mentalbalans.com): –æ–±—Ä–∞–±–æ—Ç–∫–∞ AI –∑–∞–ø—Ä–æ—Å–æ–≤ —á–µ—Ä–µ–∑ OpenAI API
- **OpenAI API**: –≥–µ–Ω–µ—Ä–∞—Ü–∏—è AI –æ—Ç–≤–µ—Ç–æ–≤ (—á–µ—Ä–µ–∑ n8n)

---

## üìä –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

### –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã

#### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏
- `profiles` - –ø—Ä–æ—Ñ–∏–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `user_roles` - —Ä–æ–ª–∏ (user, admin)
- `profile_access_logs` - –ª–æ–≥–∏ –¥–æ—Å—Ç—É–ø–∞ –∞–¥–º–∏–Ω–æ–≤

#### AI –î–Ω–µ–≤–Ω–∏–∫
- `ai_diary_sessions` - —Å–µ—Å—Å–∏–∏ —á–∞—Ç–∞ —Å AI
- `ai_diary_messages` - –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è (user/ai)

#### –î–Ω–µ–≤–Ω–∏–∫–∏
- `mood_diary_entries` - –∑–∞–ø–∏—Å–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
- `sleep_diary_entries` - –∑–∞–ø–∏—Å–∏ —Å–Ω–∞
- `diary_entries` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–Ω–µ–≤–Ω–∏–∫–æ–≤ (NEW)
- `diary_entry_metrics` - —á–∏—Å–ª–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ –∑–∞–ø–∏—Å–µ–π (NEW)
- `diary_entry_emotions` - —ç–º–æ—Ü–∏–∏ –∑–∞–ø–∏—Å–µ–π (NEW)
- `v_default_norms` - –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–æ—Ä–º—ã –¥–ª—è –º–µ—Ç—Ä–∏–∫ (NEW, view)
- `metric_alerts` - –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–∏ –º–µ—Ç—Ä–∏–∫ (NEW)

#### –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
- `activities` - –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- `activity_types` - —Ç–∏–ø—ã –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π (—Ä–∞–±–æ—Ç–∞, –æ—Ç–¥—ã—Ö –∏ —Ç.–¥.)
- `activity_states` - —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –æ—Ü–µ–Ω–∫–∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π

#### –ö–æ–Ω—Ç–µ–Ω—Ç
- `practices` - –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏—è
- `tests` - –ø—Å–∏—Ö–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ —Ç–µ—Å—Ç—ã
- `strategies` - —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –∏ —Ç–µ—Ö–Ω–∏–∫–∏

#### –¢–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- `therapy_scenarios` - —Å—Ü–µ–Ω–∞—Ä–∏–∏ (morning, midday, evening)
- `therapy_questions` - –≤–æ–ø—Ä–æ—Å—ã —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
- `therapy_transitions` - –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ—Ö–æ–¥–æ–≤ –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏
- `user_therapy_progress` - –ø—Ä–æ–≥—Ä–µ—Å—Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### Scenario Question Types & Keys

–°–∏—Å—Ç–µ–º–∞ —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Ç–∏–ø–∞–º –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –º–∞–ø–ø–∏–Ω–≥—É –æ—Ç–≤–µ—Ç–æ–≤ –≤ –ë–î.

#### –¢–∏–ø—ã –≤–æ–ø—Ä–æ—Å–æ–≤ (question_type)

- **scale** - —á–∏—Å–ª–æ–≤–∞—è —à–∫–∞–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 0-10)
- **multiple_choice** - –æ–¥–∏–Ω–æ—á–Ω—ã–π –≤—ã–±–æ—Ä –∏–∑ —Å–ø–∏—Å–∫–∞
- **chips** - –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–π –≤—ã–±–æ—Ä (—Ç—ç–≥–∏)
- **time** - –≤—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏ (HH:mm)
- **number** - —á–∏—Å–ª–æ–≤–æ–π –≤–≤–æ–¥
- **text** - —Å–≤–æ–±–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç

#### Metadata –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤

**scale:**
```json
{
  "min": 0,
  "max": 10,
  "step": 1,
  "labels": ["–Ω–∏–∑–∫–æ", "–≤—ã—Å–æ–∫–æ"]
}
```

**multiple_choice / chips:**
```json
{
  "options": [
    {"id": "joy", "label": "–†–∞–¥–æ—Å—Ç—å", "emoji": "üòä"},
    {"id": "sad", "label": "–ì—Ä—É—Å—Ç—å", "emoji": "üò¢"}
  ],
  "maxSelect": 3
}
```

**time:**
```json
{
  "format": "HH:mm"
}
```

**number:**
```json
{
  "min": 0,
  "max": 24,
  "unit": "h"
}
```

#### –ú–∞–ø–ø–∏–Ω–≥ –æ—Ç–≤–µ—Ç–æ–≤ –≤ –ë–î

- **scale / number** ‚Üí `diary_entry_metrics` (key=question_code, value=–æ—Ç–≤–µ—Ç)
- **chips / multiple_choice** (—ç–º–æ—Ü–∏–∏) ‚Üí `diary_entry_emotions` (label, intensity)
- **chips / multiple_choice** (—Ç—Ä–∏–≥–≥–µ—Ä—ã, body) ‚Üí `diary_entries.metadata`
- **text** ‚Üí `diary_entries.context` –∏–ª–∏ `metadata.extra_notes`

–ù–æ—Ä–º—ã –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –ø–æ–¥—Ç—è–≥–∏–≤–∞—é—Ç—Å—è –∏–∑ `v_default_norms` –µ—Å–ª–∏ –Ω–µ —É–∫–∞–∑–∞–Ω—ã –≤ UI.

### Database Functions

```sql
-- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
has_role(user_id, role) ‚Üí boolean
get_user_profile_with_role() ‚Üí profile
admin_get_user_profiles(limit, offset) ‚Üí profiles[]
log_profile_access(...) ‚Üí void

-- –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏
update_activity_status(activity_id, status, notes) ‚Üí activity

-- AI –î–Ω–µ–≤–Ω–∏–∫
ensure_ai_session(session_id, user_id) ‚Üí session_info

-- –£—Ç–∏–ª–∏—Ç—ã
update_updated_at_column() ‚Üí trigger
sync_user_profile() ‚Üí trigger
handle_new_user_role() ‚Üí trigger
```

### Triggers

1. **on_auth_user_created** ‚Üí `sync_user_profile()`
   - –°–æ–∑–¥–∞–µ—Ç profile –ø—Ä–∏ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏

2. **on_new_user_role** ‚Üí `handle_new_user_role()`
   - –ù–∞–∑–Ω–∞—á–∞–µ—Ç —Ä–æ–ª—å 'user' –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º

3. **ai_diary_messages_webhook** ‚Üí `simple_webhook_trigger()`
   - –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç user —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ n8n webhook

4. **update_*_updated_at** ‚Üí `update_updated_at_column()`
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç updated_at

---

## ü§ñ AI –î–Ω–µ–≤–Ω–∏–∫ - –î–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   FreeChat  ‚îÇ (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ)
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
       ‚îÇ
       ‚îú‚îÄ 1. –î–æ–±–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ UI
       ‚îÇ
       ‚îú‚îÄ 2. INSERT –≤ ai_diary_messages (message_type='user')
       ‚îÇ      ‚Üì
       ‚îÇ   Database Trigger —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
       ‚îÇ      ‚Üì
       ‚îÇ   simple_webhook_trigger()
       ‚îÇ      ‚Üì
       ‚îÇ   HTTP POST ‚Üí https://mentalbalans.com/webhook/ai-diary-chat
       ‚îÇ
       ‚îú‚îÄ 3. n8n –ø–æ–ª—É—á–∞–µ—Ç webhook
       ‚îÇ      ‚Üì
       ‚îÇ   –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —á–µ—Ä–µ–∑ OpenAI API
       ‚îÇ      ‚Üì
       ‚îÇ   INSERT –≤ ai_diary_messages (message_type='ai')
       ‚îÇ
       ‚îî‚îÄ 4. Realtime –ø–æ–¥–ø–∏—Å–∫–∞ –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤–æ–µ AI —Å–æ–æ–±—â–µ–Ω–∏–µ
              ‚Üì
           onNewMessage() callback
              ‚Üì
           –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI —Å typing —ç—Ñ—Ñ–µ–∫—Ç–æ–º
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
AIDiaryScenarios (entry point)
  ‚îî‚îÄ> AIDiaryContainer
      ‚îî‚îÄ> FreeChat (main component)
          ‚îú‚îÄ> FreeChatHeader (–∫–Ω–æ–ø–∫–∏ —Å–µ—Å—Å–∏–π)
          ‚îú‚îÄ> AIDiaryStats (—Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞)
          ‚îú‚îÄ> FreeChatMessages (—Å–ø–∏—Å–æ–∫ —Å–æ–æ–±—â–µ–Ω–∏–π)
          ‚îÇ   ‚îî‚îÄ> ChatMessage (–æ—Ç–¥–µ–ª—å–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ)
          ‚îî‚îÄ> FreeChatInput (–ø–æ–ª–µ –≤–≤–æ–¥–∞)
```

### –•—É–∫–∏

**useAIDiaryChat** - –æ—Å–Ω–æ–≤–Ω–æ–π —Ö—É–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–∞—Ç–æ–º
```typescript
const {
  chatMessages,          // –ú–∞—Å—Å–∏–≤ —Å–æ–æ–±—â–µ–Ω–∏–π
  chatInput,             // –¢–µ–∫—É—â–∏–π –≤–≤–æ–¥
  setChatInput,          // Setter –¥–ª—è –≤–≤–æ–¥–∞
  isAITyping,            // AI –ø–µ—á–∞—Ç–∞–µ—Ç?
  isLoading,             // –ó–∞–≥—Ä—É–∑–∫–∞
  currentSessionId,      // ID —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
  handleSendMessage,     // –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è
  handleNewSession,      // –ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è
  handleEndSession,      // –ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ—Å—Å–∏—é
  handleSuggestionClick, // –ö–ª–∏–∫ –ø–æ suggestion
  isUserAuthenticated,   // –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
  loadingHistory         // –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏
} = useAIDiaryChat();
```

**useAIDiaryAnalytics** - –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ —Å–µ—Å—Å–∏–π
```typescript
const {
  globalStats,        // –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  currentSessionStats,// –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
  topTopics,          // –¢–æ–ø 5 —Ç–µ–º
  isLoadingStats,     // –ó–∞–≥—Ä—É–∑–∫–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏
  refreshStats        // –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
} = useAIDiaryAnalytics();
```

### –°–µ—Ä–≤–∏—Å—ã

**AIDiaryService** (`src/services/ai-diary.service.ts`)
```typescript
class AIDiaryService {
  // –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ —Å–µ—Å—Å–∏—è —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –≤ –ë–î
  ensureSessionExists(sessionId: string): Promise<void>
  
  // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –Ω–æ–≤—ã–µ AI —Å–æ–æ–±—â–µ–Ω–∏—è
  subscribeToMessages(sessionId: string, onNewMessage: callback): RealtimeChannel
  
  // –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ
  sendMessage(message: string, sessionId: string): Promise<response>
  
  // –ó–∞–≥—Ä—É–∑–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
  loadSessionHistory(sessionId: string): Promise<messages[]>
  
  // –ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è
  startNewSession(): Promise<sessionId>
  
  // –ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ—Å—Å–∏—é
  endSession(sessionId: string): Promise<void>
  
  // –û—Ç–ø–∏—Å–∞—Ç—å—Å—è –æ—Ç Realtime
  unsubscribe(): void
}
```

**AIDiaryAnalyticsService** (`src/services/ai-diary-analytics.service.ts`)
```typescript
class AIDiaryAnalyticsService {
  // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
  getUserStats(userId: string): Promise<SessionStats>
  
  // –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ç–µ–∫—É—â–µ–π —Å–µ—Å—Å–∏–∏
  getCurrentSessionStats(sessionId, userId, messages): Promise<SessionStats>
  
  // –¢–æ–ø —Ç–µ–º—ã
  getTopTopics(userId: string, limit: number): Promise<TopicFrequency[]>
}
```

### –°—Ü–µ–Ω–∞—Ä–∏–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### 1. –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (–ø–µ—Ä–≤—ã–π –≤–∏–∑–∏—Ç)
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç AI –î–Ω–µ–≤–Ω–∏–∫
2. –ü—Ä–æ–≤–µ—Ä–∫–∞ localStorage ‚Üí sessionId –Ω–µ—Ç
3. –ü–æ–∫–∞–∑ welcome —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç AI
4. –ü—Ä–∏ –ø–µ—Ä–≤–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ:
   - –ì–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –Ω–æ–≤—ã–π sessionId
   - –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ localStorage
   - –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ ai_diary_sessions
   - –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Realtime
```

#### 2. –í–æ–∑–≤—Ä–∞—â–∞—é—â–∏–π—Å—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
```
1. –û—Ç–∫—Ä—ã—Ç–∏–µ AI –î–Ω–µ–≤–Ω–∏–∫–∞
2. –ß—Ç–µ–Ω–∏–µ sessionId –∏–∑ localStorage
3. –ó–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑ ai_diary_messages
4. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤—Å–µ—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
5. –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ Realtime –¥–ª—è –Ω–æ–≤—ã—Ö AI –æ—Ç–≤–µ—Ç–æ–≤
6. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–∑–≥–æ–≤–æ—Ä
```

#### 3. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π —Å–µ—Å—Å–∏–∏
```
1. –ö–ª–∏–∫ –Ω–∞ "–ù–æ–≤–∞—è —Å–µ—Å—Å–∏—è"
2. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ç–µ–∫—É—â–µ–π (ended_at –≤ ai_diary_sessions)
3. –û—Ç–ø–∏—Å–∫–∞ –æ—Ç Realtime
4. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ sessionId
5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ localStorage
6. –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ –≤ ai_diary_sessions
7. –û—á–∏—Å—Ç–∫–∞ chatMessages
8. –ü–æ–∫–∞–∑ welcome —Å–æ–æ–±—â–µ–Ω–∏—è
```

#### 4. –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Å–µ—Å—Å–∏–∏
```
1. –ö–ª–∏–∫ –Ω–∞ "–ó–∞–≤–µ—Ä—à–∏—Ç—å —Å–µ—Å—Å–∏—é"
2. UPDATE ai_diary_sessions SET ended_at = NOW()
3. –û—Ç–ø–∏—Å–∫–∞ –æ—Ç Realtime
4. –£–¥–∞–ª–µ–Ω–∏–µ sessionId –∏–∑ localStorage
5. –°–±—Ä–æ—Å currentSessionId state
6. –ü–æ–∫–∞–∑ —Ñ–∏–Ω–∞–ª—å–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
```

#### 5. –û—Ç–ø—Ä–∞–≤–∫–∞ –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
```
User -> UI:
  1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç
  2. –ù–∞–∂–∏–º–∞–µ—Ç Enter –∏–ª–∏ –∫–Ω–æ–ø–∫—É Send
  3. handleSendMessage() –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è

UI -> Supabase:
  4. –°–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ chatMessages (UI)
  5. INSERT –≤ ai_diary_messages (type='user')
  6. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è typing indicator

Supabase -> n8n:
  7. Trigger —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
  8. HTTP POST –Ω–∞ webhook
  9. n8n –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç —Å OpenAI

n8n -> Supabase:
  10. INSERT –≤ ai_diary_messages (type='ai')

Supabase -> UI:
  11. Realtime subscription –ø–æ–ª—É—á–∞–µ—Ç event
  12. onNewMessage() callback —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
  13. –£–±–∏—Ä–∞–µ—Ç—Å—è typing indicator
  14. AI —Å–æ–æ–±—â–µ–Ω–∏–µ –¥–æ–±–∞–≤–ª—è–µ—Ç—Å—è –≤ chatMessages
  15. Typing effect (character-by-character)
  16. –ü–∞—Ä—Å–∏–Ω–≥ suggestions (–µ—Å–ª–∏ –µ—Å—Ç—å)
```

#### 6. Quick Suggestions
```
1. AI –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ —Å suggestions –≤ metadata
2. FreeChatMessages –ø–∞—Ä—Å–∏—Ç suggestions
3. –û—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∫–∞–∫ –∫–Ω–æ–ø–∫–∏ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º
4. –ö–ª–∏–∫ –ø–æ suggestion:
   - handleSuggestionClick(text)
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –∫–∞–∫ user message
   - –ü—Ä–æ—Ü–µ—Å—Å –∫–∞–∫ –≤ –ø.5
```

### Storage

**localStorage:**
```javascript
'ai_diary_session_id': string // UUID —Å–µ—Å—Å–∏–∏
```

**Supabase (ai_diary_sessions):**
```json
{
  "id": "uuid",
  "user_id": "uuid",
  "session_id": "ai_diary_1234567890_xyz",
  "started_at": "2024-01-15T10:00:00Z",
  "ended_at": null,
  "summary": null,
  "insights": {},
  "emotional_state": {}
}
```

**Supabase (ai_diary_messages):**
```json
{
  "id": "uuid",
  "user_id": "uuid",
  "session_id": "ai_diary_1234567890_xyz",
  "message_type": "user" | "ai",
  "content": "–¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è",
  "metadata": {
    "timestamp": "2024-01-15T10:05:00Z",
    "source": "free_chat",
    "suggestions": ["–í–∞—Ä–∏–∞–Ω—Ç 1", "–í–∞—Ä–∏–∞–Ω—Ç 2"]
  },
  "created_at": "2024-01-15T10:05:00Z"
}
```

---

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–Ω–µ–≤–Ω–∏–∫–∏ - –î–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –û–±–∑–æ—Ä

–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–Ω–µ–≤–Ω–∏–∫–∏ - —ç—Ç–æ —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –¥–∞–Ω–Ω—ã—Ö –≤ –Ω–æ—Ä–º–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ. –í –æ—Ç–ª–∏—á–∏–µ –æ—Ç —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ AI —á–∞—Ç–∞, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–Ω–µ–≤–Ω–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –∑–∞—Ä–∞–Ω–µ–µ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –≤–æ–ø—Ä–æ—Å—ã –∏ —Ñ–æ—Ä–º–∞—Ç—ã –æ—Ç–≤–µ—Ç–æ–≤.

### –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö

#### –¢–∞–±–ª–∏—Ü—ã

**diary_entries** - –æ—Å–Ω–æ–≤–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–ø–∏—Å–µ–π
```sql
- id: uuid (PK)
- user_id: uuid (FK ‚Üí auth.users)
- topic: text (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'mood_diary_flow')
- context: text (—Å–≤–æ–±–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç –∏–∑ text-–≤–æ–ø—Ä–æ—Å–æ–≤)
- metadata: jsonb (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
- created_at: timestamp
```

**diary_entry_metrics** - —á–∏—Å–ª–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏
```sql
- id: uuid (PK)
- entry_id: uuid (FK ‚Üí diary_entries)
- key: text (–Ω–∞–ø—Ä–∏–º–µ—Ä, 'mood_score', 'energy_level')
- value: numeric
- norm_min: numeric (–º–∏–Ω–∏–º—É–º –Ω–æ—Ä–º—ã)
- norm_max: numeric (–º–∞–∫—Å–∏–º—É–º –Ω–æ—Ä–º—ã)
```

**diary_entry_emotions** - —ç–º–æ—Ü–∏–∏
```sql
- id: uuid (PK)
- entry_id: uuid (FK ‚Üí diary_entries)
- label: text (–Ω–∞–ø—Ä–∏–º–µ—Ä, '–†–∞–¥–æ—Å—Ç—å', '–¢—Ä–µ–≤–æ–≥–∞')
- intensity: numeric (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ, 1-10)
```

**v_default_norms** - view —Å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–º–∏ –Ω–æ—Ä–º–∞–º–∏
```sql
- key: text
- norm_min: numeric
- norm_max: numeric
```

**metric_alerts** - –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –≤—ã—Ö–æ–¥–µ –∑–∞ –Ω–æ—Ä–º—ã
```sql
- user_id: uuid
- entry_id: uuid
- metric_key: text
- value: numeric
- norm_min/norm_max: numeric
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
MoodScenarioDiaryPage (page)
  ‚îî‚îÄ> ScenarioRunner (main component)
      ‚îú‚îÄ> ScaleInput (–¥–ª—è scale –≤–æ–ø—Ä–æ—Å–æ–≤)
      ‚îú‚îÄ> ChipsInput (–¥–ª—è chips/multiple_choice)
      ‚îú‚îÄ> TimeInput (–¥–ª—è time)
      ‚îú‚îÄ> NumberInput (–¥–ª—è number)
      ‚îî‚îÄ> TextAreaInput (–¥–ª—è text)

DiariesPage
  ‚îî‚îÄ> Card: "–î–Ω–µ–≤–Ω–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è (—Å—Ü–µ–Ω–∞—Ä–∏–π)" [NEW badge]

AIDiaryWindow (–¥–ª—è –±—É–¥—É—â–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ –≤ AI –î–Ω–µ–≤–Ω–∏–∫–µ)
  ‚îú‚îÄ> Tab: "–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ" ‚Üí StructuredPanel
  ‚îÇ   ‚îî‚îÄ> ScenarioRunner
  ‚îî‚îÄ> Tab: "–ò—Å—Ç–æ—Ä–∏—è" ‚Üí StructuredHistory
```

### –°–µ—Ä–≤–∏—Å—ã

**ScenarioService** (`src/services/scenario.service.ts`)
```typescript
class ScenarioService {
  // –ü–æ–ª—É—á–∏—Ç—å —Å—Ü–µ–Ω–∞—Ä–∏–π –ø–æ slug
  getScenario(scenarioSlug: string): Promise<TherapyScenario | null>
  
  // –ü–æ–ª—É—á–∏—Ç—å –≤–æ–ø—Ä–æ—Å—ã —Å—Ü–µ–Ω–∞—Ä–∏—è
  getScenarioQuestions(scenarioId: string): Promise<TherapyQuestion[]>
  
  // –ü–æ–ª—É—á–∏—Ç—å –ø–µ—Ä–µ—Ö–æ–¥—ã –º–µ–∂–¥—É –≤–æ–ø—Ä–æ—Å–∞–º–∏
  getTransitions(fromQuestionId: string): Promise<TherapyTransition[]>
  
  // –ü–æ–ª—É—á–∏—Ç—å –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–æ—Ä–º—ã
  getDefaultNorms(): Promise<Record<string, { norm_min?, norm_max? }>>
  
  // –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–ø–∏—Å—å
  saveStructuredEntry(
    scenarioSlug: string,
    responses: Record<string, any>,
    questions: TherapyQuestion[]
  ): Promise<{ success: boolean; entryId?: string; error?: string }>
  
  // –ü–æ–ª—É—á–∏—Ç—å –ø–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–ø–∏—Å–∏
  getRecentEntries(limit: number): Promise<DiaryEntry[]>
}
```

### –¢–∏–ø—ã –≤–æ–ø—Ä–æ—Å–æ–≤ –∏ –º–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö

#### 1. scale (—à–∫–∞–ª–∞ 0-10)
```typescript
// Metadata
{
  "min": 0,
  "max": 10,
  "step": 1,
  "labels": ["–Ω–∏–∑–∫–æ", "–≤—ã—Å–æ–∫–æ"]
}

// –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ ‚Üí diary_entry_metrics
{
  key: question.question_key,  // –Ω–∞–ø—Ä–∏–º–µ—Ä, 'mood_score'
  value: 7,
  norm_min: 5,  // –∏–∑ v_default_norms
  norm_max: 8
}
```

#### 2. chips / multiple_choice (–≤—ã–±–æ—Ä –æ–ø—Ü–∏–π)
```typescript
// Metadata
{
  "options": [
    {"id": "joy", "label": "–†–∞–¥–æ—Å—Ç—å", "emoji": "üòä"},
    {"id": "anxiety", "label": "–¢—Ä–µ–≤–æ–≥–∞", "emoji": "üò∞"}
  ],
  "maxSelect": 3  // –¥–ª—è chips
}

// –ï—Å–ª–∏ question_key === 'emotions' ‚Üí diary_entry_emotions
{
  label: "–†–∞–¥–æ—Å—Ç—å",
  intensity: null
}

// –ò–Ω–∞—á–µ ‚Üí diary_entries.metadata
{
  "triggers": ["work", "health"],
  "body_symptoms": ["headache"]
}
```

#### 3. time (–≤—ã–±–æ—Ä –≤—Ä–µ–º–µ–Ω–∏)
```typescript
// Metadata
{
  "format": "HH:mm"
}

// –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ ‚Üí diary_entry_metrics
{
  key: "wake_time",
  value: 480  // –º–∏–Ω—É—Ç—ã —Å –Ω–∞—á–∞–ª–∞ –¥–Ω—è (08:00)
}
```

#### 4. number (—á–∏—Å–ª–æ–≤–æ–π –≤–≤–æ–¥)
```typescript
// Metadata
{
  "min": 0,
  "max": 24,
  "unit": "h"
}

// –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ ‚Üí diary_entry_metrics
{
  key: "sleep_hours",
  value: 7.5
}
```

#### 5. text (—Å–≤–æ–±–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç)
```typescript
// –°–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ ‚Üí diary_entries.context
context: "–°–µ–≥–æ–¥–Ω—è –±—ã–ª —Ö–æ—Ä–æ—à–∏–π –¥–µ–Ω—å..."
```

### –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏

```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø—Ä–æ—Ö–æ–¥–∏—Ç –≤—Å–µ –≤–æ–ø—Ä–æ—Å—ã —Å—Ü–µ–Ω–∞—Ä–∏—è
   ‚Üì
2. ScenarioRunner —Å–æ–±–∏—Ä–∞–µ—Ç responses: Record<questionId, answer>
   ‚Üì
3. –ö–ª–∏–∫ –Ω–∞ "–°–æ—Ö—Ä–∞–Ω–∏—Ç—å" ‚Üí handleSave()
   ‚Üì
4. scenarioService.saveStructuredEntry(scenarioSlug, responses, questions)
   ‚Üì
5. –°–æ–∑–¥–∞—ë—Ç—Å—è diary_entries –∑–∞–ø–∏—Å—å (topic, context)
   ‚Üì
6. –î–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–æ–ø—Ä–æ—Å–∞:
   - scale/number ‚Üí diary_entry_metrics (—Å –Ω–æ—Ä–º–∞–º–∏ –∏–∑ v_default_norms)
   - chips/multiple (emotions) ‚Üí diary_entry_emotions
   - chips/multiple (other) ‚Üí diary_entries.metadata
   - text ‚Üí diary_entries.context
   ‚Üì
7. Trigger check_metric_norms —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç
   ‚Üì
8. –ï—Å–ª–∏ –º–µ—Ç—Ä–∏–∫–∞ –≤–Ω–µ –Ω–æ—Ä–º—ã ‚Üí —Å–æ–∑–¥–∞—ë—Ç—Å—è metric_alerts –∑–∞–ø–∏—Å—å
   ‚Üì
9. Toast –æ–± —É—Å–ø–µ—Ö–µ ‚Üí —Å–±—Ä–æ—Å —Ñ–æ—Ä–º—ã
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å—Ü–µ–Ω–∞—Ä–∏—è mood_diary_flow

```
1. mood_score (scale 0-10)
   ‚Üí diary_entry_metrics
   
2. emotions (chips, maxSelect: 5)
   ‚Üí diary_entry_emotions
   
3. triggers (chips, maxSelect: 3)
   ‚Üí diary_entries.metadata.triggers
   
4. body_symptoms (chips, maxSelect: 5)
   ‚Üí diary_entries.metadata.body_symptoms
   
5. notes (text)
   ‚Üí diary_entries.context
```

### –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø–∏—Å–µ–π (StructuredHistory)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ—Å–ª–µ–¥–Ω–∏—Ö N –∑–∞–ø–∏—Å–µ–π —á–µ—Ä–µ–∑ `scenarioService.getRecentEntries()`
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∫–∞—Ä—Ç–æ—á–µ–∫ —Å —Ç–µ–º–æ–π, –¥–∞—Ç–æ–π, –≤—Ä–µ–º–µ–Ω–µ–º
- –ò–Ω–¥–∏–∫–∞—Ç–æ—Ä ‚ö†Ô∏è –µ—Å–ª–∏ –µ—Å—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –≤–Ω–µ –Ω–æ—Ä–º—ã (hasAbnormalMetrics)
- –ö–ª–∏–∫ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫—É ‚Üí Dialog —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π:
  - –ö–æ–Ω—Ç–µ–∫—Å—Ç (—Å–≤–æ–±–æ–¥–Ω—ã–π —Ç–µ–∫—Å—Ç)
  - –ú–µ—Ç—Ä–∏–∫–∏ —Å –ø–æ–¥—Å–≤–µ—Ç–∫–æ–π –∞–Ω–æ–º–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π
  - –≠–º–æ—Ü–∏–∏

**–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª—å–Ω–æ—Å—Ç–∏:**
```typescript
// –í getRecentEntries()
const hasAbnormal = metrics.some(m => 
  (m.norm_min && m.value < m.norm_min) ||
  (m.norm_max && m.value > m.norm_max)
)
```

### –î–æ—Å—Ç—É–ø –∫ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

1. **–ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ /diaries**
   - –ö–∞—Ä—Ç–æ—á–∫–∞ "–î–Ω–µ–≤–Ω–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è (—Å—Ü–µ–Ω–∞—Ä–∏–π)" —Å –±–µ–π–¥–∂–µ–º "–ù–û–í–û–ï"
   - –ö–ª–∏–∫ ‚Üí –ø–µ—Ä–µ—Ö–æ–¥ –Ω–∞ `/mood-scenario-diary`

2. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è /mood-scenario-diary**
   - Header —Å –ª–æ–≥–æ—Ç–∏–ø–æ–º –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π
   - –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å —ç–º–æ–¥–∂–∏ üòä
   - ScenarioRunner —Å –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏–µ–º –≤–æ–ø—Ä–æ—Å–æ–≤

3. **AI –î–Ω–µ–≤–Ω–∏–∫ /diary (–±—É–¥—É—â–µ–µ)**
   - –í–∫–ª–∞–¥–∫–∞ "–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ" ‚Üí –≤—ã–±–æ—Ä —Å—Ü–µ–Ω–∞—Ä–∏—è ‚Üí ScenarioRunner
   - –í–∫–ª–∞–¥–∫–∞ "–ò—Å—Ç–æ—Ä–∏—è" ‚Üí StructuredHistory

---

## üìÖ –ö–∞–ª–µ–Ω–¥–∞—Ä—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞

- **DayView** - –ø–æ—á–∞—Å–æ–≤–æ–π –≤–∏–¥ (00:00 - 24:00)
- **WeekView** - 7 –¥–Ω–µ–π —Å –∫–æ–ª–æ–Ω–∫–∞–º–∏
- **MonthView** - –∫–∞–ª–µ–Ω–¥–∞—Ä–Ω–∞—è —Å–µ—Ç–∫–∞

### –§—É–Ω–∫—Ü–∏–∏

- –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å –¥–∞—Ç–æ–π/–≤—Ä–µ–º–µ–Ω–µ–º
- Drag & drop (–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ)
- –§–∏–ª—å—Ç—Ä—ã –ø–æ —Ç–∏–ø–∞–º
- –ü–æ–∏—Å–∫
- Recurring events (–µ–∂–µ–¥–Ω–µ–≤–Ω–æ, –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω–æ, –µ–∂–µ–º–µ—Å—è—á–Ω–æ)

### Realtime —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è

```typescript
// useActivitiesRealtime.ts
supabase
  .channel('activities-changes')
  .on('postgres_changes', {
    event: '*',
    schema: 'public',
    table: 'activities',
    filter: `user_id=eq.${userId}`
  }, (payload) => {
    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
  })
  .subscribe()
```

---

## üé® –î–∏–∑–∞–π–Ω —Å–∏—Å—Ç–µ–º–∞

### –¶–≤–µ—Ç–∞ (HSL)

–í—Å–µ —Ü–≤–µ—Ç–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã –≤ `src/index.css` –∫–∞–∫ CSS variables:

```css
:root {
  --primary: 221 83% 53%;
  --secondary: 210 40% 96%;
  --accent: 217 91% 60%;
  --background: 0 0% 100%;
  --foreground: 222 47% 11%;
  /* ... */
}

.dark {
  --primary: 217 91% 60%;
  --background: 224 71% 4%;
  --foreground: 213 31% 91%;
  /* ... */
}
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (shadcn/ui)

–í—Å–µ UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ `src/components/ui/` –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã —á–µ—Ä–µ–∑ `tailwind.config.ts`:

- Buttons (variants: default, destructive, outline, ghost, link)
- Cards, Dialogs, Sheets
- Forms (Input, Textarea, Select, Checkbox, etc.)
- Data Display (Table, Badge, Avatar)
- Navigation (Tabs, Breadcrumb, Pagination)
- Feedback (Toast, Alert, Progress)

### –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

- Mobile-first –ø–æ–¥—Ö–æ–¥
- Breakpoints: sm (640px), md (768px), lg (1024px), xl (1280px)
- Bottom Navigation –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö
- Responsive –∫–∞–ª–µ–Ω–¥–∞—Ä—å (–¥–µ–Ω—å –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö, –Ω–µ–¥–µ–ª—è/–º–µ—Å—è—Ü –Ω–∞ –¥–µ—Å–∫—Ç–æ–ø–∞—Ö)

---

## üîß –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Node.js 18+
- npm –∏–ª–∏ yarn
- Supabase –ø—Ä–æ–µ–∫—Ç (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ
git clone <repository_url>
cd mental-balance

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
npm install

# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
cp .env.example .env
```

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è .env

```env
# Supabase (—É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ –≤ –ø—Ä–æ–µ–∫—Ç–µ)
VITE_SUPABASE_URL=https://szvousyzsqdpubgfycdy.supabase.co
VITE_SUPABASE_ANON_KEY=eyJhbGci...

# AI Diary Webhook (–¥–ª—è n8n)
VITE_AI_DIARY_WEBHOOK_URL=https://mentalbalans.com/webhook/ai-diary-chat
```

### –ó–∞–ø—É—Å–∫

```bash
# Development
npm run dev

# Build
npm run build

# Preview build
npm run preview

# Lint
npm run lint
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
src/
‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îú‚îÄ‚îÄ ui/                    # shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ dashboard/             # –î–∞—à–±–æ—Ä–¥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ai-diary-scenarios/  # AI –î–Ω–µ–≤–Ω–∏–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ user-profile/        # –ü—Ä–æ—Ñ–∏–ª—å
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ activity-timeline/   # Timeline –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ calendar/              # –ö–∞–ª–µ–Ω–¥–∞—Ä—å
‚îÇ   ‚îú‚îÄ‚îÄ diaries/               # –î–Ω–µ–≤–Ω–∏–∫–∏ (mood, sleep, etc.)
‚îÇ   ‚îú‚îÄ‚îÄ practices/             # –ü—Ä–∞–∫—Ç–∏–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ onboarding/            # –û–Ω–±–æ—Ä–¥–∏–Ω–≥
‚îÇ   ‚îî‚îÄ‚îÄ statistics/            # –ì—Ä–∞—Ñ–∏–∫–∏ –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ contexts/                  # React Context
‚îÇ   ‚îú‚îÄ‚îÄ SupabaseAuthContext.tsx
‚îÇ   ‚îú‚îÄ‚îÄ PersonalizationContext.tsx
‚îÇ   ‚îú‚îÄ‚îÄ ActivitiesContext.tsx
‚îÇ   ‚îî‚îÄ‚îÄ DiaryStatusContext.tsx
‚îÇ
‚îú‚îÄ‚îÄ hooks/                     # Custom hooks
‚îÇ   ‚îú‚îÄ‚îÄ api/                   # API —Ö—É–∫–∏
‚îÇ   ‚îî‚îÄ‚îÄ use-*.ts
‚îÇ
‚îú‚îÄ‚îÄ services/                  # API —Å–µ—Ä–≤–∏—Å—ã
‚îÇ   ‚îú‚îÄ‚îÄ ai-diary.service.ts
‚îÇ   ‚îú‚îÄ‚îÄ ai-diary-analytics.service.ts
‚îÇ   ‚îú‚îÄ‚îÄ scenario.service.ts        # NEW: —Å–µ—Ä–≤–∏—Å –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–Ω–µ–≤–Ω–∏–∫–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ activity.service.ts
‚îÇ   ‚îú‚îÄ‚îÄ unified-activity.service.ts
‚îÇ   ‚îî‚îÄ‚îÄ backend-auth.service.ts
‚îÇ
‚îú‚îÄ‚îÄ integrations/supabase/     # Supabase
‚îÇ   ‚îú‚îÄ‚îÄ client.ts
‚îÇ   ‚îú‚îÄ‚îÄ types.ts (read-only, –∞–≤—Ç–æ-–≥–µ–Ω–µ—Ä–∞—Ü–∏—è)
‚îÇ   ‚îî‚îÄ‚îÄ *.repo.ts
‚îÇ
‚îú‚îÄ‚îÄ pages/                     # –°—Ç—Ä–∞–Ω–∏—Ü—ã (routes)
‚îÇ   ‚îú‚îÄ‚îÄ MoodScenarioDiaryPage.tsx  # NEW: —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –¥–Ω–µ–≤–Ω–∏–∫–∞ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ
‚îú‚îÄ‚îÄ features/                  # NEW: —Ñ–∏—á–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îÇ   ‚îî‚îÄ‚îÄ diary/
‚îÇ       ‚îú‚îÄ‚îÄ ScenarioRunner.tsx     # –î–≤–∏–∂–æ–∫ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
‚îÇ       ‚îú‚îÄ‚îÄ StructuredHistory.tsx  # –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø–∏—Å–µ–π
‚îÇ       ‚îú‚îÄ‚îÄ StructuredPanel.tsx
‚îÇ       ‚îú‚îÄ‚îÄ AIDiaryWindow.tsx
‚îÇ       ‚îî‚îÄ‚îÄ question-inputs/       # –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–≤–æ–¥–∞ –¥–ª—è –≤–æ–ø—Ä–æ—Å–æ–≤
‚îÇ           ‚îú‚îÄ‚îÄ ScaleInput.tsx
‚îÇ           ‚îú‚îÄ‚îÄ ChipsInput.tsx
‚îÇ           ‚îú‚îÄ‚îÄ TimeInput.tsx
‚îÇ           ‚îú‚îÄ‚îÄ NumberInput.tsx
‚îÇ           ‚îî‚îÄ‚îÄ TextAreaInput.tsx
‚îÇ
‚îú‚îÄ‚îÄ utils/                     # –£—Ç–∏–ª–∏—Ç—ã
‚îú‚îÄ‚îÄ types/                     # TypeScript —Ç–∏–ø—ã
‚îÇ   ‚îú‚îÄ‚îÄ scenario.types.ts      # NEW: —Ç–∏–ø—ã –¥–ª—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–Ω–µ–≤–Ω–∏–∫–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ data/                      # –°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
```

---

## üö® –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ

1. **Webhook –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω**
   - –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –≤–Ω–µ—à–Ω–µ–≥–æ —Å–µ—Ä–≤–∏—Å–∞ (n8n –Ω–∞ mentalbalans.com)
   - –ù–µ—Ç fallback –º–µ—Ö–∞–Ω–∏–∑–º–∞
   - –ù–µ—Ç retry –ª–æ–≥–∏–∫–∏

### –í–∞–∂–Ω—ã–µ

2. **Realtime –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–µ –≤—Å–µ–≥–¥–∞ —Å—Ç–∞–±–∏–ª—å–Ω–∞**
   - –ò–Ω–æ–≥–¥–∞ –Ω–µ –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è –ø—Ä–∏ unmount
   - –ú–æ–∂–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è –ø—Ä–∏ –±—ã—Å—Ç—Ä–æ–π –æ—Ç–ø—Ä–∞–≤–∫–µ

3. **–ö–∞–ª–µ–Ω–¥–∞—Ä—å - –Ω–µ—Ç drag & drop**
   - –¢–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ –¥–∏–∞–ª–æ–≥–∏ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

4. **–ì—Ä–∞—Ñ–∏–∫–∏ - –Ω–µ—Ç –≥–ª—É–±–æ–∫–æ–π –∞–Ω–∞–ª–∏—Ç–∏–∫–∏**
   - –ü—Ä–æ—Å—Ç–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö
   - –ù–µ—Ç –∫–æ—Ä—Ä–µ–ª—è—Ü–∏–π, –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤, –∏–Ω—Å–∞–π—Ç–æ–≤

5. **–ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏**
   - –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –Ω–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–¥–∞–ø—Ç–∏–≤–Ω—ã
   - Bottom nav –º–æ–∂–µ—Ç –ø–µ—Ä–µ–∫—Ä—ã–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–Ω—Ç

### –ù–µ–∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ

6. **–ù–µ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞/–∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö**
7. **–ù–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä—è–º–∏**
8. **–û–Ω–±–æ—Ä–¥–∏–Ω–≥ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–π** (12+ —ç–∫—Ä–∞–Ω–æ–≤)
9. **–ù–µ—Ç –ø–æ–ª–Ω–æ–π —Ç–µ–º–Ω–æ–π —Ç–µ–º—ã** (–µ—Å—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—å, –Ω–æ –Ω–µ –≤–µ–∑–¥–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)

---

## üìà –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

### –ö—Ä–∞—Ç–∫–æ—Å—Ä–æ—á–Ω—ã–µ (1-2 –º–µ—Å—è—Ü–∞)

1. **–†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–Ω–µ–≤–Ω–∏–∫–æ–≤**
   - –£—Ç—Ä–µ–Ω–Ω–∏–π, –¥–Ω–µ–≤–Ω–æ–π, –≤–µ—á–µ—Ä–Ω–∏–π —Å—Ü–µ–Ω–∞—Ä–∏–∏
   - –î–Ω–µ–≤–Ω–∏–∫ —Å–Ω–∞ –≤ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–º —Ñ–æ—Ä–º–∞—Ç–µ
   - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–æ—Ä–º—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –∏—Å—Ç–æ—Ä–∏–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –Ω–∞ –æ—Å–Ω–æ–≤–µ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏–π –æ—Ç –Ω–æ—Ä–º

2. **–£–ª—É—á—à–µ–Ω–∏–µ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏**
   - Fallback –¥–ª—è webhook
   - Retry –º–µ—Ö–∞–Ω–∏–∑–º
   - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Realtime –ø–æ–¥–ø–∏—Å–æ–∫

3. **–ö–∞–ª–µ–Ω–¥–∞—Ä—å**
   - Drag & drop –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
   - Bulk operations (–º–∞—Å—Å–æ–≤–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
   - Export –≤ Google Calendar

4. **–ú–æ–±–∏–ª—å–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
   - –ü–æ–ª–Ω–∞—è –∞–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
   - PWA —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
   - –û—Ñ–ª–∞–π–Ω —Ä–µ–∂–∏–º (limited)

### –°—Ä–µ–¥–Ω–µ—Å—Ä–æ—á–Ω—ã–µ (3-6 –º–µ—Å—è—Ü–µ–≤)

5. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞**
   - AI-–∏–Ω—Å–∞–π—Ç—ã –Ω–∞ –æ—Å–Ω–æ–≤–µ –¥–∞–Ω–Ω—ã—Ö
   - –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
   - Balance Wheel –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
   - –ö–æ—Ä—Ä–µ–ª—è—Ü–∏–∏ –º–µ–∂–¥—É –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ–º, —Å–Ω–æ–º, –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—è–º–∏

6. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏**
   - Apple Health / Google Fit
   - Wearables (–¥–ª—è —Å–Ω–∞ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏)
   - –≠–∫—Å–ø–æ—Ä—Ç/–∏–º–ø–æ—Ä—Ç –≤ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ñ–æ—Ä–º–∞—Ç–∞—Ö

7. **–°–æ—Ü–∏–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏**
   - Sharing –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
   - –ì—Ä—É–ø–ø—ã –ø–æ–¥–¥–µ—Ä–∂–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   - –ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å (–¥–ª—è —Ç–µ—Ä–∞–ø–µ–≤—Ç–æ–≤)

### –î–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–µ (6+ –º–µ—Å—è—Ü–µ–≤)

8. **–ü–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è**
   - –ù–∞—Ç–∏–≤–Ω—ã–µ –º–æ–±–∏–ª—å–Ω—ã–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (React Native)
   - Desktop –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (Electron)
   - API –¥–ª—è —Å—Ç–æ—Ä–æ–Ω–Ω–∏—Ö —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

9. **AI —É–ª—É—á—à–µ–Ω–∏—è**
   - Voice input/output
   - –ú—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω–æ—Å—Ç—å (–∞–Ω–∞–ª–∏–∑ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π)
   - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –º–æ–¥–µ–ª–∏

10. **–ú–æ–Ω–µ—Ç–∏–∑–∞—Ü–∏—è**
    - Freemium –º–æ–¥–µ–ª—å
    - Premium —Ñ—É–Ω–∫—Ü–∏–∏
    - –ü–æ–¥–ø–∏—Å–∫–∏ –¥–ª—è –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤

---

## ü§ù Contribution

### –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

1. –°–æ–∑–¥–∞—Ç—å feature branch –æ—Ç `main`
2. –í–Ω–µ—Å—Ç–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ
4. –°–æ–∑–¥–∞—Ç—å Pull Request
5. Code review
6. Merge –≤ `main`

### Code Style

- TypeScript strict mode
- ESLint + Prettier
- Semantic commit messages
- Component naming: PascalCase
- Files: kebab-case

### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# Unit tests (–∫–æ–≥–¥–∞ –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã)
npm run test

# E2E tests (–ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è)
npm run test:e2e
```

---

## üìö –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- [React](https://react.dev/)
- [TypeScript](https://www.typescriptlang.org/)
- [Vite](https://vitejs.dev/)
- [Tailwind CSS](https://tailwindcss.com/)
- [shadcn/ui](https://ui.shadcn.com/)
- [Supabase](https://supabase.com/docs)
- [React Query](https://tanstack.com/query/latest)

### –í–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã
- `AI_DIARY_ARCHITECTURE.md` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ AI –î–Ω–µ–≤–Ω–∏–∫–∞
- `PROJECT_ARCHITECTURE.md` - –ø–æ–ª–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- `.env.example` - –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### Supabase Dashboard
- [Project Dashboard](https://supabase.com/dashboard/project/szvousyzsqdpubgfycdy)
- [Database](https://supabase.com/dashboard/project/szvousyzsqdpubgfycdy/editor)
- [Auth](https://supabase.com/dashboard/project/szvousyzsqdpubgfycdy/auth/users)
- [Logs](https://supabase.com/dashboard/project/szvousyzsqdpubgfycdy/logs/postgres-logs)

---

## üìù Changelog

### [Current] - Alpha v0.3.1 (2025-01)

#### –î–æ–±–∞–≤–ª–µ–Ω–æ
- üÜï **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–Ω–µ–≤–Ω–∏–∫–∏**: –Ω–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ—Ö–æ–∂–¥–µ–Ω–∏—è —Ç–µ—Ä–∞–ø–µ–≤—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤
  - ScenarioRunner –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥–∞ –≤–æ–ø—Ä–æ—Å–æ–≤
  - 5 —Ç–∏–ø–æ–≤ –≤–æ–ø—Ä–æ—Å–æ–≤: scale, chips, time, number, text
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –º–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö –≤ –ë–î (metrics, emotions, context)
  - –°–∏—Å—Ç–µ–º–∞ –Ω–æ—Ä–º –∏ –∞–ª–µ—Ä—Ç–æ–≤ –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è—Ö
  - –ò—Å—Ç–æ—Ä–∏—è –∑–∞–ø–∏—Å–µ–π —Å –∏–Ω–¥–∏–∫–∞—Ü–∏–µ–π –∞–Ω–æ–º–∞–ª–∏–π
- üÜï **–î–Ω–µ–≤–Ω–∏–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è (—Å—Ü–µ–Ω–∞—Ä–∏–π)**: –ø–µ—Ä–≤—ã–π —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –¥–Ω–µ–≤–Ω–∏–∫
  - 5 –≤–æ–ø—Ä–æ—Å–æ–≤: –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ, —ç–º–æ—Ü–∏–∏, —Ç—Ä–∏–≥–≥–µ—Ä—ã, —Ç–µ–ª–µ—Å–Ω—ã–µ —Å–∏–º–ø—Ç–æ–º—ã, –∑–∞–º–µ—Ç–∫–∏
  - –û—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ `/mood-scenario-diary`
  - –ö–∞—Ä—Ç–æ—á–∫–∞ —Å –±–µ–π–¥–∂–µ–º "–ù–û–í–û–ï" –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ –¥–Ω–µ–≤–Ω–∏–∫–æ–≤
- üÜï **–ù–æ–≤—ã–µ —Ç–∞–±–ª–∏—Ü—ã –ë–î**:
  - `diary_entries` - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –∑–∞–ø–∏—Å–µ–π
  - `diary_entry_metrics` - —á–∏—Å–ª–æ–≤—ã–µ –º–µ—Ç—Ä–∏–∫–∏ —Å –Ω–æ—Ä–º–∞–º–∏
  - `diary_entry_emotions` - —ç–º–æ—Ü–∏–∏
  - `v_default_norms` - –¥–µ—Ñ–æ–ª—Ç–Ω—ã–µ –Ω–æ—Ä–º—ã –º–µ—Ç—Ä–∏–∫
  - `metric_alerts` - –∞–ª–µ—Ä—Ç—ã –ø—Ä–∏ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∏—è—Ö
- üÜï **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –≤–≤–æ–¥–∞**: ScaleInput, ChipsInput, TimeInput, NumberInput, TextAreaInput
- üÜï **ScenarioService**: —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å–æ —Å—Ü–µ–Ω–∞—Ä–∏—è–º–∏ –∏ –∑–∞–ø–∏—Å—è–º–∏

#### –£–ª—É—á—à–µ–Ω–æ
- –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–Ω–µ–≤–Ω–∏–∫–æ–≤ —Å—Ç–∞–ª–∞ –±–æ–ª–µ–µ –≥–∏–±–∫–æ–π –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ–π
- –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º –æ–ø–∏—Å–∞–Ω–∏–µ–º —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–Ω–µ–≤–Ω–∏–∫–æ–≤

### [0.3.0] - Alpha (2024-01)

#### –î–æ–±–∞–≤–ª–µ–Ω–æ
- AI –î–Ω–µ–≤–Ω–∏–∫ (FreeChat) —Å Realtime
- –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ AI —Å–µ—Å—Å–∏–π
- Quick suggestions
- Typing —ç—Ñ—Ñ–µ–∫—Ç –¥–ª—è AI –æ—Ç–≤–µ—Ç–æ–≤

#### –£–ª—É—á—à–µ–Ω–æ
- –ö–∞–ª–µ–Ω–¥–∞—Ä—å - –ø–æ–≤—Ç–æ—Ä—è—é—â–∏–µ—Å—è —Å–æ–±—ã—Ç–∏—è
- –î–Ω–µ–≤–Ω–∏–∫–∏ - —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- –ü—Ä–æ—Ñ–∏–ª—å - –±–æ–ª—å—à–µ –ø–æ–ª–µ–π –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏–∏

#### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ
- Realtime –ø–æ–¥–ø–∏—Å–∫–∏ –Ω–µ –≤—Å–µ–≥–¥–∞ –æ—Ç–∫–ª—é—á–∞–ª–∏—Å—å
- –ì—Ä–∞—Ñ–∏–∫–∏ - –ø—Ä–æ–±–ª–µ–º—ã —Å timezone
- –ú–æ–±–∏–ª—å–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª–∞ –∫–æ–Ω—Ç–µ–Ω—Ç

### [0.2.0] - Alpha (2023-12)
- –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –¥–Ω–µ–≤–Ω–∏–∫–æ–≤
- –ö–∞–ª–µ–Ω–¥–∞—Ä—å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–µ–π
- –û–Ω–±–æ—Ä–¥–∏–Ω–≥

### [0.1.0] - Alpha (2023-11)
- –ù–∞—á–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è
- –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- –ë–∞–∑–æ–≤—ã–π UI

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**Developer**: [–í–∞—à–µ –∏–º—è]  
**Email**: [–í–∞—à email]  
**Supabase Project**: `szvousyzsqdpubgfycdy`  
**Admin User**: `somov50@gmail.com` (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞–µ—Ç admin —Ä–æ–ª—å)

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

[–£–∫–∞–∂–∏—Ç–µ –ª–∏—Ü–µ–Ω–∑–∏—é –ø—Ä–æ–µ–∫—Ç–∞]

---

**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ**: –Ø–Ω–≤–∞—Ä—å 2025  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞**: 2.1  
**–°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞**: üü° Alpha - –∞–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

**–ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è**: –î–æ–±–∞–≤–ª–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –¥–Ω–µ–≤–Ω–∏–∫–æ–≤ —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –º–∞–ø–ø–∏–Ω–≥–æ–º –¥–∞–Ω–Ω—ã—Ö, –Ω–æ—Ä–º–∞–º–∏ –∏ –∞–ª–µ—Ä—Ç–∞–º–∏
